---
import type { Lang } from '@i18n/translations';
import { useTranslations, getLocalizedPath } from '@i18n/utils';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const appStoreUrl = 'https://apps.apple.com/app/hustlrr-every-ai-chat/id6737912223';
const successUrl = `https://www.hustlrr.ai${getLocalizedPath('/landing/mail-success', lang)}`;
---

<!-- Email signup card -->
<section class="px-5 py-8">
  <div class="mx-auto max-w-[var(--max-w-content)]">
    <div class="animate-reveal rounded-[50px] bg-gradient-to-br from-[#150c21]/70 to-black/90 p-10 md:p-12">
      <h2 class="text-xl md:text-2xl font-bold text-white mb-2">
        {t('newsletter.title')}
      </h2>
      <p class="text-sm text-text-secondary mb-6">
        {t('newsletter.subtitle')}
      </p>

      <!-- Email form -->
      <form
        action="https://app.kit.com/forms/YOUR_FORM_ID/subscriptions"
        method="post"
        class="flex flex-col sm:flex-row gap-3 mb-4 max-w-lg"
      >
        <input type="hidden" name="redirect_url" value={successUrl} />
        <input
          type="email"
          name="email_address"
          required
          placeholder={t('newsletter.placeholder')}
          class="flex-1 px-4 py-3 rounded-xl bg-white/10 border border-white/10 text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-sm"
        />
        <button
          type="submit"
          class="hover-button px-6 py-3 rounded-xl bg-accent text-white font-medium whitespace-nowrap text-sm"
        >
          {t('cta.getGuide')}
        </button>
      </form>

      <p class="text-xs text-white/40">
        {t('newsletter.consent')}
      </p>
    </div>
  </div>
</section>

<!-- Support section -->
<section class="px-5 py-8">
  <div class="mx-auto max-w-[var(--max-w-content)] rounded-[var(--radius-section)] bg-accent p-8 md:p-12">

    <!-- Human support -->
    <div class="text-center mb-16 animate-reveal">
      <!-- Chat bubbles icon -->
      <div class="flex items-center justify-center gap-2 mb-6" aria-hidden="true">
        <div class="w-14 h-12 bg-white/20 rounded-full rounded-bl-sm"></div>
        <div class="w-12 h-10 bg-white/15 rounded-full rounded-br-sm -ml-3 mt-2"></div>
      </div>

      <h3 class="text-xl font-semibold text-white mb-3">
        {t('support.title')}
      </h3>
      <p class="text-sm text-white/70 leading-relaxed max-w-md mx-auto mb-6">
        {t('support.description')}
      </p>

      <a
        href="mailto:support@hustlrr.ai"
        class="inline-flex items-center gap-3 bg-transparent text-white font-medium text-base px-6 py-3 rounded-[var(--radius-cta)] border border-white/30 hover:bg-white/10 transition-colors duration-200"
      >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="4" width="20" height="16" rx="2"/>
          <path d="M22 4L12 13 2 4"/>
        </svg>
        {t('cta.contactUs')}
      </a>
    </div>

    <!-- Data privacy -->
    <div class="text-center animate-reveal">
      <!-- Lock icon -->
      <div class="flex items-center justify-center mb-6" aria-hidden="true">
        <div class="relative w-16 h-16">
          <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-14 h-10 bg-white/15 rounded-full rounded-b-2xl"></div>
          <div class="absolute top-1 left-1/2 -translate-x-1/2 w-8 h-8 flex items-center justify-center">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="text-white/40">
              <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2"/>
              <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
        </div>
      </div>

      <h3 class="text-xl font-semibold text-white mb-3">
        {t('privacy.dataTitle')}
      </h3>
      <p class="text-sm text-white/70 leading-relaxed max-w-md mx-auto mb-6">
        {t('privacy.dataDescription')}
      </p>

      <a
        href={appStoreUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-3 bg-transparent text-white font-medium text-base px-6 py-3 rounded-[var(--radius-cta)] border border-white/30 hover:bg-white/10 transition-colors duration-200"
      >
        {t('cta.downloadApp')}
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>

  </div>
</section>
